<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>丧丧的blog</title>
  
  <subtitle>很丧很丧</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ccblog.club/"/>
  <updated>2019-09-18T06:23:26.556Z</updated>
  <id>http://ccblog.club/</id>
  
  <author>
    <name>cc</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>在node项目中经常用到的一些东西</title>
    <link href="http://ccblog.club/2019/09/18/%E5%9C%A8node%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%BB%8F%E5%B8%B8%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF/"/>
    <id>http://ccblog.club/2019/09/18/在node项目中经常用到的一些东西/</id>
    <published>2019-09-18T06:06:25.000Z</published>
    <updated>2019-09-18T06:23:26.556Z</updated>
    
    <content type="html"><![CDATA[<h4 id="一-引入body-parser"><a href="#一-引入body-parser" class="headerlink" title="一.引入body-parser"></a>一.引入body-parser</h4><h6 id="app-js"><a href="#app-js" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;))</span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure><a id="more"></a><p>#### </p><h4 id="二-引入session"><a href="#二-引入session" class="headerlink" title="二.引入session"></a>二.引入session</h4><h6 id="app-js-1"><a href="#app-js-1" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">'express-session'</span>)</span><br><span class="line"></span><br><span class="line">app.use(session(&#123;</span><br><span class="line">    secret:<span class="string">'keyboard cat'</span>,</span><br><span class="line">    resave:<span class="literal">false</span>,</span><br><span class="line">    saveUninitialized:<span class="literal">true</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><h6 id="router-js"><a href="#router-js" class="headerlink" title="router.js"></a>router.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">'/login'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body = req.body</span><br><span class="line">    User.findOne(&#123;</span><br><span class="line">        emial:body.emial,</span><br><span class="line">        password:body.password</span><br><span class="line">    &#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err,user</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="keyword">return</span>  res.status(<span class="number">500</span>).json(&#123;</span><br><span class="line">                err_code:<span class="number">500</span>,</span><br><span class="line">                messages:<span class="string">"err"</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!user)&#123;</span><br><span class="line">           <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">                err_code:<span class="number">0</span>,</span><br><span class="line">                messages:<span class="string">"emial has benn invilied"</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        req.session.user = user</span><br><span class="line">        <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">            err_code:<span class="number">1</span>,</span><br><span class="line">            messages:<span class="string">"ok"</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="三-引入multer"><a href="#三-引入multer" class="headerlink" title="三.引入multer"></a>三.引入multer</h4><h6 id="router-js-1"><a href="#router-js-1" class="headerlink" title="router.js"></a>router.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> multer =<span class="built_in">require</span>(<span class="string">'multer'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> storage = multer.diskStorage(&#123;</span><br><span class="line">    destination:<span class="function"><span class="keyword">function</span>(<span class="params">req,file,cb</span>)</span>&#123;</span><br><span class="line">        cb(<span class="literal">null</span>,<span class="string">'./uploads/qua-img'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    filename:<span class="function"><span class="keyword">function</span>(<span class="params">req,file,cb</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> ext = file.originalname.split(<span class="string">'.'</span>)[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">var</span> tmname = (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime()+<span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">9999</span>)</span><br><span class="line">        cb(<span class="literal">null</span>,<span class="string">''</span>+tmname+<span class="string">'.'</span>+ext+<span class="string">''</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> upload = multer(&#123;</span><br><span class="line">    storage:storage</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/qua-pic'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> size= req.file</span><br><span class="line">    <span class="keyword">if</span>(size&gt;<span class="number">500000</span>)&#123;</span><br><span class="line">        res.status(<span class="number">500</span>).json(&#123;</span><br><span class="line">            err_code:<span class="number">-1</span>,</span><br><span class="line">            messages:<span class="string">"pic too big"</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">     res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">        err_code:<span class="number">0</span>,</span><br><span class="line">        messages:<span class="string">"okk"</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="四-ajax模板"><a href="#四-ajax模板" class="headerlink" title="四.ajax模板"></a>四.ajax模板</h4><h6 id="xxx-js"><a href="#xxx-js" class="headerlink" title="xxx.js"></a>xxx.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#create-form'</span>).on(<span class="string">'submit'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">var</span> formData = $(<span class="keyword">this</span>).serialize()</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">'post'</span>,</span><br><span class="line">        url:<span class="string">'/create'</span>,</span><br><span class="line">        data:formData,</span><br><span class="line">        dataType:<span class="string">'json'</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> err_code =data.err_code</span><br><span class="line">            <span class="keyword">if</span>(err_code===<span class="number">500</span>)&#123;</span><br><span class="line">                <span class="built_in">window</span>.alert(<span class="string">"服务器出错啦"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err_code===<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">window</span>.alert(<span class="string">"提交成功"</span>)</span><br><span class="line">                <span class="built_in">window</span>.location.href=<span class="string">'/create'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="五-art-template"><a href="#五-art-template" class="headerlink" title="五.art-template"></a>五.art-template</h4><h6 id="app-js-2"><a href="#app-js-2" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.engine(&apos;html&apos;,require(&apos;express-art-template&apos;))</span><br></pre></td></tr></table></figure><h4 id="六-router配置"><a href="#六-router配置" class="headerlink" title="六.router配置"></a>六.router配置</h4><h6 id="app-js-3"><a href="#app-js-3" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">'./router'</span>)</span><br><span class="line"></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure><p>​    router.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var router =express.Router()</span><br><span class="line"></span><br><span class="line">module.exports = router</span><br></pre></td></tr></table></figure><h4 id="七-获取图片"><a href="#七-获取图片" class="headerlink" title="七.获取图片"></a>七.获取图片</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs =<span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">exports.getAllimgs = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    fs.readdir(<span class="string">'./uploads/qua-img'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,files</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            callback(err)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> allimgs = [];</span><br><span class="line">        (<span class="function"><span class="keyword">function</span> <span class="title">iterator</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==files.length)&#123;</span><br><span class="line">                callback(allimgs)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            fs.stat(<span class="string">'./uploads/qua-img/'</span>+files[i],<span class="function"><span class="keyword">function</span>(<span class="params">err,stats</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(stats.isFile())&#123;</span><br><span class="line">                    allimgs.push(files[i])</span><br><span class="line">                &#125;</span><br><span class="line">                iterator(i+<span class="number">1</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            &#125;)(<span class="number">0</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="八-kindeditor引入"><a href="#八-kindeditor引入" class="headerlink" title="八.kindeditor引入"></a>八.kindeditor引入</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">KindEditor.ready(<span class="function"><span class="keyword">function</span>(<span class="params">K</span>) </span>&#123;</span><br><span class="line">editor = K.create(<span class="string">'textarea[name="content"]'</span>, &#123;</span><br><span class="line">allowFileManager : <span class="literal">true</span>,</span><br><span class="line">afterBlur: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.sync();&#125;,</span><br><span class="line">uploadJson: <span class="string">'/uploadImg'</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/uploadImg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="keyword">new</span> formidable.IncomingForm()</span><br><span class="line">    form.keepExtensions = <span class="literal">true</span></span><br><span class="line">    form.uploadDir =__dirname + <span class="string">'/public/upload'</span></span><br><span class="line">    form.parse(req,<span class="function"><span class="keyword">function</span>(<span class="params">err,fields,files</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            <span class="keyword">throw</span> err</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> image = files.imgFile;</span><br><span class="line">        <span class="keyword">var</span> path = image.path</span><br><span class="line">        path = path.replace(<span class="string">'/\\/g'</span>,<span class="string">'/'</span>)</span><br><span class="line">        <span class="keyword">var</span> url = <span class="string">'/upload'</span> +path.substr(path.lastIndexOf(<span class="string">'/'</span>),path.length)</span><br><span class="line">        <span class="keyword">var</span> info = &#123;</span><br><span class="line">            <span class="string">"error"</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="string">"url"</span>:url</span><br><span class="line">        &#125;;</span><br><span class="line">        res.send(info)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>持续更新..</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;一-引入body-parser&quot;&gt;&lt;a href=&quot;#一-引入body-parser&quot; class=&quot;headerlink&quot; title=&quot;一.引入body-parser&quot;&gt;&lt;/a&gt;一.引入body-parser&lt;/h4&gt;&lt;h6 id=&quot;app-js&quot;&gt;&lt;a href=&quot;#app-js&quot; class=&quot;headerlink&quot; title=&quot;app.js&quot;&gt;&lt;/a&gt;app.js&lt;/h6&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; bodyParser = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;body-parser&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;app.use(bodyParser.urlencoded(&amp;#123;&lt;span class=&quot;attr&quot;&gt;extended&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&amp;#125;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;app.use(bodyParser.json())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="便捷" scheme="http://ccblog.club/tags/%E4%BE%BF%E6%8D%B7/"/>
    
  </entry>
  
  <entry>
    <title>node+mongoose增删改查思路</title>
    <link href="http://ccblog.club/2019/09/16/node-mongoose%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%80%9D%E8%B7%AF/"/>
    <id>http://ccblog.club/2019/09/16/node-mongoose增删改查思路/</id>
    <published>2019-09-16T06:57:26.000Z</published>
    <updated>2019-09-16T06:58:51.083Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-建立views视图页面"><a href="#1-建立views视图页面" class="headerlink" title="1.建立views视图页面"></a>1.建立views视图页面</h3><table><thead><tr><th>界面名称</th><th>url地址</th></tr></thead><tbody><tr><td>index.html</td><td>/home</td></tr><tr><td>table.html</td><td>/table</td></tr><tr><td>edit.html</td><td>/table/edit</td></tr></tbody></table><a id="more"></a><h3 id="2-安装相关模块插件"><a href="#2-安装相关模块插件" class="headerlink" title="2.安装相关模块插件"></a>2.安装相关模块插件</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm i -S express//安装组件</span><br><span class="line"></span><br><span class="line">npm i -S art-template</span><br><span class="line">npm i -S express-art-template//安装组件</span><br><span class="line"></span><br><span class="line">npm i -S body-parser//用于post获取数据</span><br><span class="line"></span><br><span class="line">npm i -g nodemon//全局安装，用于实时观察代码改动</span><br></pre></td></tr></table></figure><h3 id="3-建立node服务器"><a href="#3-建立node服务器" class="headerlink" title="3.建立node服务器"></a>3.建立node服务器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"开始监听"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)<span class="comment">//开启端口127.0.0.1:3000的服务</span></span><br></pre></td></tr></table></figure><h3 id="4-node中启用相关插件"><a href="#4-node中启用相关插件" class="headerlink" title="4.node中启用相关插件"></a>4.node中启用相关插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/public'</span>,express.static(<span class="string">'./public/'</span>)) <span class="comment">//用于使用public目录中的js，css等</span></span><br><span class="line"></span><br><span class="line">app.engine(<span class="string">'html'</span>,<span class="built_in">require</span>(<span class="string">'express-art-template'</span>))</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded([extend:<span class="literal">false</span>]))</span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure><h3 id="5-开启路由"><a href="#5-开启路由" class="headerlink" title="5.开启路由"></a>5.开启路由</h3><p>app.js端</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">'./routers.js'</span>)</span><br><span class="line"></span><br><span class="line">app.use(router) <span class="comment">//导入router模块</span></span><br></pre></td></tr></table></figure><p>router端</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var router = express.Router()</span><br></pre></td></tr></table></figure><h3 id="6-定义传递方式路径"><a href="#6-定义传递方式路径" class="headerlink" title="6.定义传递方式路径"></a>6.定义传递方式路径</h3><table><thead><tr><th>请求方式</th><th>传递路径</th><th>传递参数</th><th>备注</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="7-建立mongodb库"><a href="#7-建立mongodb库" class="headerlink" title="7.建立mongodb库"></a>7.建立mongodb库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line"></span><br><span class="line">mongoose.connect(&apos;mongodb:localhost://....&apos;)</span><br><span class="line"></span><br><span class="line">var schema = mongoose.schema()</span><br><span class="line"></span><br><span class="line">var userSchema = new schema(&#123;</span><br><span class="line">data:&#123;&#123;options&#125;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = mongooser.model(&quot;user&quot;,userSchema)</span><br></pre></td></tr></table></figure><h3 id="8-增删改查"><a href="#8-增删改查" class="headerlink" title="8.增删改查"></a>8.增删改查</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//请自行查询mongoose语法，例：</span><br><span class="line">var user = require(&apos;./model/user.js&apos;)</span><br><span class="line"></span><br><span class="line">router.get(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">user.find(function(err)&#123;</span><br><span class="line">if(err)&#123;</span><br><span class="line">consolo.log(err)</span><br><span class="line">&#125;</span><br><span class="line">res.render(&apos;index.html&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-建立views视图页面&quot;&gt;&lt;a href=&quot;#1-建立views视图页面&quot; class=&quot;headerlink&quot; title=&quot;1.建立views视图页面&quot;&gt;&lt;/a&gt;1.建立views视图页面&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;界面名称&lt;/th&gt;
&lt;th&gt;url地址&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;index.html&lt;/td&gt;
&lt;td&gt;/home&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;table.html&lt;/td&gt;
&lt;td&gt;/table&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;edit.html&lt;/td&gt;
&lt;td&gt;/table/edit&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="nodejs" scheme="http://ccblog.club/tags/nodejs/"/>
    
      <category term="mongodb" scheme="http://ccblog.club/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>markdown基本语法</title>
    <link href="http://ccblog.club/2019/09/15/markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <id>http://ccblog.club/2019/09/15/markdown基本语法/</id>
    <published>2019-09-15T06:48:47.000Z</published>
    <updated>2019-09-15T06:51:37.293Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/191d1e21f7ed" target="_blank" rel="noopener">链接</a></p><p><del>有链接我为什么要自己写？</del></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/191d1e21f7ed&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;链接&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;del&gt;有链接我为什么要自己写？&lt;/del&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="html" scheme="http://ccblog.club/tags/html/"/>
    
      <category term="语法基础" scheme="http://ccblog.club/tags/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>突然好想你-五月天</title>
    <link href="http://ccblog.club/2019/09/15/%E7%AA%81%E7%84%B6%E5%A5%BD%E6%83%B3%E4%BD%A0-%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    <id>http://ccblog.club/2019/09/15/突然好想你-五月天/</id>
    <published>2019-09-15T06:06:44.000Z</published>
    <updated>2019-09-15T06:46:53.937Z</updated>
    
    <content type="html"><![CDATA[<h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><ul><li>原链接</li><li>吉他谱</li><li>弹唱</li><li>总结</li></ul><h5 id="让我们开始吧"><a href="#让我们开始吧" class="headerlink" title="让我们开始吧"></a>让我们开始吧</h5><p>​    <a href="https://yoopu.me/view/g100Ay1J" target="_blank" rel="noopener">原谱链接</a></p><a id="more"></a><p><del>低音唱什么五月天？</del></p><p>​    </p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;目录&quot;&gt;&lt;a href=&quot;#目录&quot; class=&quot;headerlink&quot; title=&quot;目录&quot;&gt;&lt;/a&gt;目录&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原链接&lt;/li&gt;
&lt;li&gt;吉他谱&lt;/li&gt;
&lt;li&gt;弹唱&lt;/li&gt;
&lt;li&gt;总结&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;让我们开始吧&quot;&gt;&lt;a href=&quot;#让我们开始吧&quot; class=&quot;headerlink&quot; title=&quot;让我们开始吧&quot;&gt;&lt;/a&gt;让我们开始吧&lt;/h5&gt;&lt;p&gt;​    &lt;a href=&quot;https://yoopu.me/view/g100Ay1J&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;原谱链接&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="吉他谱" scheme="http://ccblog.club/categories/%E5%90%89%E4%BB%96%E8%B0%B1/"/>
    
    
      <category term="有谱么" scheme="http://ccblog.club/tags/%E6%9C%89%E8%B0%B1%E4%B9%88/"/>
    
      <category term="弹唱" scheme="http://ccblog.club/tags/%E5%BC%B9%E5%94%B1/"/>
    
  </entry>
  
</feed>
