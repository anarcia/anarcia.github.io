<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>丧丧的blog</title>
  
  <subtitle>很丧很丧</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ccblog.club/"/>
  <updated>2019-09-20T07:53:52.485Z</updated>
  <id>http://ccblog.club/</id>
  
  <author>
    <name>cc</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>vue2.X集合webpack3.X时的各种坑</title>
    <link href="http://ccblog.club/2019/09/20/vue2-X%E9%9B%86%E5%90%88webpack3-X%E6%97%B6%E7%9A%84%E5%90%84%E7%A7%8D%E5%9D%91/"/>
    <id>http://ccblog.club/2019/09/20/vue2-X集合webpack3-X时的各种坑/</id>
    <published>2019-09-20T07:43:41.000Z</published>
    <updated>2019-09-20T07:53:52.485Z</updated>
    
    <content type="html"><![CDATA[<h5 id="一-vue的引用"><a href="#一-vue的引用" class="headerlink" title="一.vue的引用"></a>一.vue的引用</h5><p>由于默认的main属性是属于vue.common.js而不是vue.js，因此如果进行普通引入</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br></pre></td></tr></table></figure><p>是无法正常运行的。</p><h6 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h6><p>1.直接导入vue路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;../node_module/vue/dist/vue.js&apos;</span><br></pre></td></tr></table></figure><p>2.在webpack配置项中对路径进行改动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve:&#123;</span><br><span class="line">      alias:&#123; //修改路径</span><br><span class="line">          &quot;vue$&quot;:&quot;vue/dist/vue.js&quot;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h5 id="二-xxx-vue如何让html接受"><a href="#二-xxx-vue如何让html接受" class="headerlink" title="二.xxx.vue如何让html接受"></a>二.xxx.vue如何让html接受</h5><p>vue文件默认不被webpack识别，因此在进行render等模块操作时候需要导入loader</p><h6 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-loader vue-template-compiler</span><br><span class="line"></span><br><span class="line"> &#123;test:/\.vue$/,use:&quot;vue-loader&quot;&#125;</span><br></pre></td></tr></table></figure><p>正常的话就可以进行vue与webpack的合作了</p><p>。。</p><p>然而你还是被报错报成猪头的话</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const VueLoaderPlugin = require(&apos;vue-loader/lib/plugin&apos;)</span><br><span class="line"></span><br><span class="line">new VueLoaderPlugin()</span><br></pre></td></tr></table></figure><p>在配置文件的全局和plugins下分别加入这两条代码就可以识别了</p>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;一-vue的引用&quot;&gt;&lt;a href=&quot;#一-vue的引用&quot; class=&quot;headerlink&quot; title=&quot;一.vue的引用&quot;&gt;&lt;/a&gt;一.vue的引用&lt;/h5&gt;&lt;p&gt;由于默认的main属性是属于vue.common.js而不是vue.js，因此如果进行普通引入&lt;/p&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="-vue -webpack" scheme="http://ccblog.club/tags/vue-webpack/"/>
    
  </entry>
  
  <entry>
    <title>webpack3.X详细配置指南</title>
    <link href="http://ccblog.club/2019/09/20/webpack3-X%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/"/>
    <id>http://ccblog.club/2019/09/20/webpack3-X详细配置指南/</id>
    <published>2019-09-20T05:02:28.000Z</published>
    <updated>2019-09-20T07:08:46.681Z</updated>
    
    <content type="html"><![CDATA[<h4 id="一，基本配置"><a href="#一，基本配置" class="headerlink" title="一，基本配置"></a>一，基本配置</h4><h5 id="1-创建src文件夹用于存放主文件"><a href="#1-创建src文件夹用于存放主文件" class="headerlink" title="1.创建src文件夹用于存放主文件"></a>1.创建src文件夹用于存放主文件</h5><p>​        </p><a id="more"></a><h5 id="2-创建dist文件夹存放webpack转换过的文件"><a href="#2-创建dist文件夹存放webpack转换过的文件" class="headerlink" title="2.创建dist文件夹存放webpack转换过的文件"></a>2.创建dist文件夹存放webpack转换过的文件</h5><h5 id="3-在根目录下创建webpack-config-js文件用于修改webpack配置"><a href="#3-在根目录下创建webpack-config-js文件用于修改webpack配置" class="headerlink" title="3.在根目录下创建webpack.config.js文件用于修改webpack配置"></a>3.在根目录下创建webpack.config.js文件用于修改webpack配置</h5><h5 id="4-在src文件夹中创建index-html（随意，建议遵循mvc建立views文件夹），main-js（所有js和css的入口文件）在html不导入任何的js和css包"><a href="#4-在src文件夹中创建index-html（随意，建议遵循mvc建立views文件夹），main-js（所有js和css的入口文件）在html不导入任何的js和css包" class="headerlink" title="4.在src文件夹中创建index.html（随意，建议遵循mvc建立views文件夹），main.js（所有js和css的入口文件）在html不导入任何的js和css包"></a>4.在src文件夹中创建index.html（随意，建议遵循mvc建立views文件夹），main.js（所有js和css的入口文件）在html不导入任何的js和css包</h5><h5 id><a href="#" class="headerlink" title=" "></a> </h5><h4 id="二，详细配置"><a href="#二，详细配置" class="headerlink" title="二，详细配置"></a>二，详细配置</h4><h5 id="1-webpack-dev-server"><a href="#1-webpack-dev-server" class="headerlink" title="1.webpack-dev-server"></a>1.webpack-dev-server</h5><p>该组件用于自动将src的文件打包到dist变成webpack格式输出</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--&gt;终端&lt;--!&gt;</span><br><span class="line">npm init -y <span class="comment">//初始化项目</span></span><br><span class="line">npm init webpack-dev-server <span class="comment">//安装组件</span></span><br><span class="line"></span><br><span class="line">&lt;!--&gt;package.json&lt;--!&gt;</span><br><span class="line">   <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack-dev-server --open --port 3000 --contentBase src --hot"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//执行自动打开  绑定3000端口  设src为根目录  启动热更新</span></span><br><span class="line"></span><br><span class="line">&lt;!--&gt;配置文件&lt;--!&gt;</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry:path.join(__dirname,<span class="string">'./src/main.js'</span>), <span class="comment">//入口文件</span></span><br><span class="line">    output:&#123;</span><br><span class="line">        path:path.join(__dirname,<span class="string">'./dist'</span>),<span class="comment">//出口文件</span></span><br><span class="line">        filename:<span class="string">'bundle.js'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-html-webpack-plugin"><a href="#2-html-webpack-plugin" class="headerlink" title="2.html-webpack-plugin"></a>2.html-webpack-plugin</h5><p>该组件用于自动生成一个和html相同的界面并且导入bundle.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--&gt;终端&lt;--!&gt;</span><br><span class="line">npm i html-webpack-plugin</span><br><span class="line"></span><br><span class="line">&lt;!--&gt;配置文件&lt;--!&gt;</span><br><span class="line">plugins:[</span><br><span class="line">        <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),<span class="comment">//new一个热更新的模块对象</span></span><br><span class="line">        <span class="keyword">new</span> htmlWbppackFlugin(&#123;</span><br><span class="line">            <span class="comment">//创建一个在内存中生成html页面的插件</span></span><br><span class="line">            template:path.join(__dirname,<span class="string">'./src/index.html'</span>),<span class="comment">//指定模板页面</span></span><br><span class="line">            filename:<span class="string">'index.html'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><h5 id="3-导入css-sass-图标-图像url等文件"><a href="#3-导入css-sass-图标-图像url等文件" class="headerlink" title="3.导入css/sass/图标/图像url等文件"></a>3.导入css/sass/图标/图像url等文件</h5><p>通过各种loader让webpack能够识别这些东西</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!--&gt;终端&lt;--!&gt;</span><br><span class="line">npm i css-loader file-loader</span><br><span class="line">npm i url-loader</span><br><span class="line"> </span><br><span class="line"> &lt;!--&gt;配置文件&lt;--!&gt;</span><br><span class="line"> <span class="built_in">module</span>:&#123;<span class="comment">//这个节点用于配置所有的第三方模块加载器</span></span><br><span class="line">        rules:[<span class="comment">//所有模块的匹配规则</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span> ,<span class="attr">use</span>:[<span class="string">'style-loader'</span>,<span class="string">'css-loader'</span>]&#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|gif|jepg)$/</span>,<span class="attr">use</span>:<span class="string">'url-loader?limit=7631&amp;name=[hash:8]-[name].[ext]'</span>&#125;,<span class="comment">//读取图片</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(ttf|eot|svg|woff|woff2)$/</span>,<span class="attr">use</span>:<span class="string">"url-loader"</span>&#125;<span class="comment">//处理字体文件 </span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="4-通过babel插件来识别es6等高级语言"><a href="#4-通过babel插件来识别es6等高级语言" class="headerlink" title="4.通过babel插件来识别es6等高级语言"></a>4.通过babel插件来识别es6等高级语言</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--&gt;终端&lt;--!&gt;</span><br><span class="line">npm i babel-core babel-loader babel-plugin-transform-runtime</span><br><span class="line">npm i babel-preset-env babel-preset-stage<span class="number">-0</span></span><br><span class="line"></span><br><span class="line">&lt;!--&gt;配置文件&lt;--!&gt;</span><br><span class="line">   rules:[<span class="comment">//所有模块的匹配规则</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span> ,<span class="attr">use</span>:[<span class="string">'style-loader'</span>,<span class="string">'css-loader'</span>]&#125;,</span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(jpg|png|gif|jepg)$/</span>,<span class="attr">use</span>:<span class="string">'url-loader?limit=7631&amp;name=[hash:8]-[name].[ext]'</span>&#125;,<span class="comment">//读取图片</span></span><br><span class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(ttf|eot|svg|woff|woff2)$/</span>,<span class="attr">use</span>:<span class="string">"url-loader"</span>&#125;,<span class="comment">//处理字体文件 </span></span><br><span class="line">       &#123; &#123;<span class="attr">test</span>:<span class="regexp">/\.js$/</span>,<span class="attr">use</span>:<span class="string">"bebel-loader"</span>,<span class="attr">exclude</span>:<span class="regexp">/node_modules/</span>&#125;&#125;<span class="comment">//在配置时，必须把node_modules排除</span></span><br><span class="line">        ]</span><br></pre></td></tr></table></figure><p>然后在根目录新建一个.babelrc的配置文件，为json格式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"presets"</span>:[<span class="string">"env"</span>,<span class="string">"stage-0"</span>],</span><br><span class="line"><span class="string">"plugins"</span>:[<span class="string">"transform-runtime"</span>]</span><br></pre></td></tr></table></figure><p>注意</p><h6 id="由于本文是基于webpack3-X的配置，目前普遍使用4-X-因此，babel-core的版本必须降为6-X并且babel-loader的版本必须降到7-X，不然你会被报错到怀疑人生。"><a href="#由于本文是基于webpack3-X的配置，目前普遍使用4-X-因此，babel-core的版本必须降为6-X并且babel-loader的版本必须降到7-X，不然你会被报错到怀疑人生。" class="headerlink" title="由于本文是基于webpack3.X的配置，目前普遍使用4.X.因此，babel-core的版本必须降为6.X并且babel-loader的版本必须降到7.X，不然你会被报错到怀疑人生。"></a>由于本文是基于webpack3.X的配置，目前普遍使用4.X.因此，babel-core的版本必须降为6.X并且babel-loader的版本必须降到7.X，不然你会被报错到怀疑人生。</h6><h6 id="如果你已经将上面的配置操作完毕并且对html，css等操作没有报错的话，拿webpack3-X的配置就基本okk了。"><a href="#如果你已经将上面的配置操作完毕并且对html，css等操作没有报错的话，拿webpack3-X的配置就基本okk了。" class="headerlink" title="如果你已经将上面的配置操作完毕并且对html，css等操作没有报错的话，拿webpack3.X的配置就基本okk了。"></a>如果你已经将上面的配置操作完毕并且对html，css等操作没有报错的话，拿webpack3.X的配置就基本okk了。</h6>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;一，基本配置&quot;&gt;&lt;a href=&quot;#一，基本配置&quot; class=&quot;headerlink&quot; title=&quot;一，基本配置&quot;&gt;&lt;/a&gt;一，基本配置&lt;/h4&gt;&lt;h5 id=&quot;1-创建src文件夹用于存放主文件&quot;&gt;&lt;a href=&quot;#1-创建src文件夹用于存放主文件&quot; class=&quot;headerlink&quot; title=&quot;1.创建src文件夹用于存放主文件&quot;&gt;&lt;/a&gt;1.创建src文件夹用于存放主文件&lt;/h5&gt;&lt;p&gt;​        &lt;/p&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="vue" scheme="http://ccblog.club/tags/vue/"/>
    
      <category term="webpack" scheme="http://ccblog.club/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>nodejs最实用分页攻略</title>
    <link href="http://ccblog.club/2019/09/20/nodejs%E6%9C%80%E5%AE%9E%E7%94%A8%E5%88%86%E9%A1%B5%E6%94%BB%E7%95%A5/"/>
    <id>http://ccblog.club/2019/09/20/nodejs最实用分页攻略/</id>
    <published>2019-09-20T02:30:24.000Z</published>
    <updated>2019-09-20T02:37:02.107Z</updated>
    
    <content type="html"><![CDATA[<h6 id="话不多说直接开始"><a href="#话不多说直接开始" class="headerlink" title="话不多说直接开始"></a>话不多说直接开始</h6><h5 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1.准备工作"></a>1.准备工作</h5><p>​    在你看这篇文章想要进行分页时，请确保已经做好以下准备工作</p><a id="more"></a><p>​            ——你的html页面已经搭建完成（表格，上一页/下一页，页面跳转）</p><p>​            ——你的后台数据已经通过模板或者循环成功的渲染到你的前台表格</p><h5 id="2-给他们做一个点击事件，通过switch（if）操作"><a href="#2-给他们做一个点击事件，通过switch（if）操作" class="headerlink" title="2.给他们做一个点击事件，通过switch（if）操作"></a>2.给他们做一个点击事件，通过switch（if）操作</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jump</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nowpage = $(<span class="string">'#nowpage'</span>).text()</span><br><span class="line">    <span class="keyword">var</span> allpage = $(<span class="string">'#allpage'</span>).text()</span><br><span class="line">    <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'prev'</span>:</span><br><span class="line">            <span class="keyword">if</span> (nowpage &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                nowpage--</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                alert(<span class="string">'已经是第一页了'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            ;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'next'</span>:</span><br><span class="line">            <span class="keyword">if</span> (nowpage &lt; allpage) &#123;</span><br><span class="line">                nowpage++ </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123; alert(<span class="string">'已经是最后一页了'</span>) &#125;</span><br><span class="line">            ; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'go'</span>:</span><br><span class="line">            <span class="keyword">if</span> ($(<span class="string">'#gopage'</span>).val() &gt; allpage) &#123;</span><br><span class="line">                alert(<span class="string">'输入页数错误了'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> ($(<span class="string">'#gopage'</span>).val() &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                alert(<span class="string">'输入页数错误了'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                nowpage = $(<span class="string">'#gopage'</span>).val()</span><br><span class="line">            &#125;; <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">window</span>.location.href = <span class="string">'/create?page='</span>+nowpage+<span class="string">''</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-后台操作"><a href="#3-后台操作" class="headerlink" title="3.后台操作"></a>3.后台操作</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/create'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pagesize = req.query.pagesize || <span class="number">10</span></span><br><span class="line">    <span class="keyword">var</span> page = req.query.page || <span class="number">1</span></span><br><span class="line">    <span class="keyword">var</span> allcount1 = <span class="literal">null</span></span><br><span class="line">    Journalism.count(&#123;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err,allcount</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.status(<span class="number">500</span>).send(<span class="string">"Server Not Found"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        allcount1 = allcount</span><br><span class="line">    &#125;)</span><br><span class="line">    Journalism.find(<span class="function"><span class="keyword">function</span>(<span class="params">err,journalisms</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            <span class="keyword">return</span> res.status(<span class="number">500</span>).send(<span class="string">"Server Not Found"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        res.render(<span class="string">'create.html'</span>,&#123;</span><br><span class="line">            journalisms:journalisms,</span><br><span class="line">            user:req.session.user,</span><br><span class="line">            nowpage:page,</span><br><span class="line">            allpage:<span class="built_in">Math</span>.ceil(allcount1/pagesize)</span><br><span class="line">        &#125;)  </span><br><span class="line">    &#125;).sort(&#123;<span class="string">'datatime'</span>:<span class="number">-1</span>&#125;).limit(pagesize).skip((page<span class="number">-1</span>)*pagesize)</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>基本分页就此完成</p>]]></content>
    
    <summary type="html">
    
      &lt;h6 id=&quot;话不多说直接开始&quot;&gt;&lt;a href=&quot;#话不多说直接开始&quot; class=&quot;headerlink&quot; title=&quot;话不多说直接开始&quot;&gt;&lt;/a&gt;话不多说直接开始&lt;/h6&gt;&lt;h5 id=&quot;1-准备工作&quot;&gt;&lt;a href=&quot;#1-准备工作&quot; class=&quot;headerlink&quot; title=&quot;1.准备工作&quot;&gt;&lt;/a&gt;1.准备工作&lt;/h5&gt;&lt;p&gt;​    在你看这篇文章想要进行分页时，请确保已经做好以下准备工作&lt;/p&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="nodejs" scheme="http://ccblog.club/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>nodejs在表单中添加验证码验证</title>
    <link href="http://ccblog.club/2019/09/20/nodejs%E5%9C%A8%E8%A1%A8%E5%8D%95%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%AA%8C%E8%AF%81%E7%A0%81%E9%AA%8C%E8%AF%81/"/>
    <id>http://ccblog.club/2019/09/20/nodejs在表单中添加验证码验证/</id>
    <published>2019-09-20T02:18:07.000Z</published>
    <updated>2019-09-20T02:29:42.506Z</updated>
    
    <content type="html"><![CDATA[<h6 id="废话不多说了直接开始吧"><a href="#废话不多说了直接开始吧" class="headerlink" title="废话不多说了直接开始吧"></a>废话不多说了直接开始吧</h6><h5 id="1，好一个简单的表单页面，just-like，懒得改格式了你们将就哈"><a href="#1，好一个简单的表单页面，just-like，懒得改格式了你们将就哈" class="headerlink" title="1，好一个简单的表单页面，just like，懒得改格式了你们将就哈"></a>1，<img src="file:///C:%5CUsers%5C86139%5CAppData%5CLocal%5CTemp%5CSGPicFaceTpBq%5C8116%5C00664CB8.png" alt="img">好一个简单的表单页面，just like，懒得改格式了你们将就哈</h5><a id="more"></a><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"formlist"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleFormControlInput1"</span>&gt;</span>您的姓名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"exampleFormControlInput1"</span> <span class="attr">placeholder</span>=<span class="string">"请输入正确的姓名方便我们的联系"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleFormControlInput1"</span>&gt;</span>您的邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"exampleFormControlInput1"</span> <span class="attr">placeholder</span>=<span class="string">"请输入正确的邮箱方便我们的联系"</span> <span class="attr">name</span>=<span class="string">"emial"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleFormControlInput1"</span>&gt;</span>您的手机号码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"exampleFormControlInput1"</span> <span class="attr">placeholder</span>=<span class="string">"请输入正确的手机号方便我们的联系"</span> <span class="attr">name</span>=<span class="string">"phone"</span>&gt;</span></span><br><span class="line">                              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleFormControlSelect1"</span>&gt;</span>应聘合作相关<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"exampleFormControlSelect1"</span> <span class="attr">name</span>=<span class="string">"class"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>应聘<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>合作<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>投诉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span>&gt;</span>建议<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"exampleFormControlTextarea1"</span>&gt;</span>具体内容<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"exampleFormControlTextarea1"</span> <span class="attr">rows</span>=<span class="string">"3"</span> <span class="attr">name</span>=<span class="string">"note"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"验证码"</span>  <span class="attr">id</span>=<span class="string">"svgtext"</span> <span class="attr">name</span>=<span class="string">"svg"</span>&gt;</span></span><br><span class="line">                      </span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">'/ver'</span> <span class="attr">onclick</span>=<span class="string">'changeSvg()'</span> <span class="attr">id</span>=<span class="string">"svgimg"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"alert alert-warning"</span> <span class="attr">role</span>=<span class="string">"alert"</span> <span class="attr">id</span>=<span class="string">"control"</span>&gt;</span></span><br><span class="line">                          请输入验证码</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">data-toggle</span>=<span class="string">"modal"</span> <span class="attr">data-target</span>=<span class="string">"#exampleModal"</span>&gt;</span></span><br><span class="line">                                确认提交信息</span><br><span class="line">                              <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                        </span><br><span class="line">                              <span class="comment">&lt;!-- Modal --&gt;</span></span><br><span class="line">                              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal fade"</span> <span class="attr">id</span>=<span class="string">"exampleModal"</span> <span class="attr">tabindex</span>=<span class="string">"-1"</span> <span class="attr">role</span>=<span class="string">"dialog"</span> <span class="attr">aria-labelledby</span>=<span class="string">"exampleModalLabel"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-dialog"</span> <span class="attr">role</span>=<span class="string">"document"</span>&gt;</span></span><br><span class="line">                                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-content"</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-header"</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">"modal-title"</span> <span class="attr">id</span>=<span class="string">"exampleModalLabel"</span>&gt;</span>提交您的信息<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span> <span class="attr">aria-label</span>=<span class="string">"Close"</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;times;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-body"</span>&gt;</span></span><br><span class="line">                                      请确认您填写的信息准确从而方便我们之间的联系</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"modal-footer"</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-secondary"</span> <span class="attr">data-dismiss</span>=<span class="string">"modal"</span>&gt;</span>再想想<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>确定了<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-然后我们在router-js端做个验证码"><a href="#2-然后我们在router-js端做个验证码" class="headerlink" title="2.然后我们在router.js端做个验证码"></a>2.然后我们在router.js端做个验证码</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> captcha = <span class="built_in">require</span>(<span class="string">'svg-captcha'</span>)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/ver'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cap = captcha.create();</span><br><span class="line">    req.session.captcha = cap.text</span><br><span class="line">    res.type(<span class="string">'svg'</span>)</span><br><span class="line">    res.send(cap.data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这样一来图片img的src路径指向该理由，从而显示验证码图片</p><h5 id="3-做一个点击事件"><a href="#3-做一个点击事件" class="headerlink" title="3.做一个点击事件"></a>3.做一个点击事件</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">         <span class="function"><span class="keyword">function</span> <span class="title">changeSvg</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           $(event.target).attr(<span class="string">'src'</span>,<span class="string">'/ver?'</span>+<span class="built_in">Math</span>.random())</span><br><span class="line">         &#125;</span><br><span class="line">       &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h5 id="4-最后便是提交表单的ajax了"><a href="#4-最后便是提交表单的ajax了" class="headerlink" title="4.最后便是提交表单的ajax了"></a>4.最后便是提交表单的ajax了</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#formlist'</span>).on(<span class="string">'submit'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">var</span> formData = $(<span class="keyword">this</span>).serialize()</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">'post'</span>,</span><br><span class="line">        url:<span class="string">'/person'</span>,</span><br><span class="line">        data:formData,</span><br><span class="line">        dataType:<span class="string">'json'</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> err_code =data.err_code</span><br><span class="line">            <span class="keyword">if</span>(err_code===<span class="number">500</span>)&#123;</span><br><span class="line">                <span class="built_in">window</span>.alert(<span class="string">"服务器出错啦"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err_code===<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="built_in">window</span>.alert(<span class="string">"验证码错误请重试"</span>)</span><br><span class="line">                $(<span class="string">'#control'</span>).attr(<span class="string">"class"</span>,<span class="string">"alert alert-danger"</span>)</span><br><span class="line">                $(<span class="string">'#control'</span>).text(<span class="string">'请输入正确的验证码,注意大小写的区分哦'</span>)</span><br><span class="line">                $(<span class="string">'#svgimg'</span>).attr(<span class="string">'src'</span>,<span class="string">'/ver?'</span>+<span class="built_in">Math</span>.random())</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err_code===<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">window</span>.alert(<span class="string">"您的信息已经提交成功"</span>)</span><br><span class="line">                $(<span class="string">'#control'</span>).attr(<span class="string">"class"</span>,<span class="string">"alert alert-success"</span>)</span><br><span class="line">                $(<span class="string">'#control'</span>).text(<span class="string">'验证码输入正确'</span>)</span><br><span class="line">                <span class="built_in">window</span>.location.href = <span class="string">'/person'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>关于表单提交的post路由就不贴了，这样一个验证系统就差不多多好了( ´Д`)y━・</p><p>如有问题可以提问</p>]]></content>
    
    <summary type="html">
    
      &lt;h6 id=&quot;废话不多说了直接开始吧&quot;&gt;&lt;a href=&quot;#废话不多说了直接开始吧&quot; class=&quot;headerlink&quot; title=&quot;废话不多说了直接开始吧&quot;&gt;&lt;/a&gt;废话不多说了直接开始吧&lt;/h6&gt;&lt;h5 id=&quot;1，好一个简单的表单页面，just-like，懒得改格式了你们将就哈&quot;&gt;&lt;a href=&quot;#1，好一个简单的表单页面，just-like，懒得改格式了你们将就哈&quot; class=&quot;headerlink&quot; title=&quot;1，好一个简单的表单页面，just like，懒得改格式了你们将就哈&quot;&gt;&lt;/a&gt;1，&lt;img src=&quot;file:///C:%5CUsers%5C86139%5CAppData%5CLocal%5CTemp%5CSGPicFaceTpBq%5C8116%5C00664CB8.png&quot; alt=&quot;img&quot;&gt;好一个简单的表单页面，just like，懒得改格式了你们将就哈&lt;/h5&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="nodejs" scheme="http://ccblog.club/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>在node项目中经常用到的一些东西</title>
    <link href="http://ccblog.club/2019/09/18/%E5%9C%A8node%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%BB%8F%E5%B8%B8%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF/"/>
    <id>http://ccblog.club/2019/09/18/在node项目中经常用到的一些东西/</id>
    <published>2019-09-18T06:06:25.000Z</published>
    <updated>2019-09-18T06:23:26.556Z</updated>
    
    <content type="html"><![CDATA[<h4 id="一-引入body-parser"><a href="#一-引入body-parser" class="headerlink" title="一.引入body-parser"></a>一.引入body-parser</h4><h6 id="app-js"><a href="#app-js" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;))</span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure><a id="more"></a><p>#### </p><h4 id="二-引入session"><a href="#二-引入session" class="headerlink" title="二.引入session"></a>二.引入session</h4><h6 id="app-js-1"><a href="#app-js-1" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">'express-session'</span>)</span><br><span class="line"></span><br><span class="line">app.use(session(&#123;</span><br><span class="line">    secret:<span class="string">'keyboard cat'</span>,</span><br><span class="line">    resave:<span class="literal">false</span>,</span><br><span class="line">    saveUninitialized:<span class="literal">true</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><h6 id="router-js"><a href="#router-js" class="headerlink" title="router.js"></a>router.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">'/login'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body = req.body</span><br><span class="line">    User.findOne(&#123;</span><br><span class="line">        emial:body.emial,</span><br><span class="line">        password:body.password</span><br><span class="line">    &#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err,user</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="keyword">return</span>  res.status(<span class="number">500</span>).json(&#123;</span><br><span class="line">                err_code:<span class="number">500</span>,</span><br><span class="line">                messages:<span class="string">"err"</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!user)&#123;</span><br><span class="line">           <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">                err_code:<span class="number">0</span>,</span><br><span class="line">                messages:<span class="string">"emial has benn invilied"</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        req.session.user = user</span><br><span class="line">        <span class="keyword">return</span> res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">            err_code:<span class="number">1</span>,</span><br><span class="line">            messages:<span class="string">"ok"</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="三-引入multer"><a href="#三-引入multer" class="headerlink" title="三.引入multer"></a>三.引入multer</h4><h6 id="router-js-1"><a href="#router-js-1" class="headerlink" title="router.js"></a>router.js</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> multer =<span class="built_in">require</span>(<span class="string">'multer'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> storage = multer.diskStorage(&#123;</span><br><span class="line">    destination:<span class="function"><span class="keyword">function</span>(<span class="params">req,file,cb</span>)</span>&#123;</span><br><span class="line">        cb(<span class="literal">null</span>,<span class="string">'./uploads/qua-img'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    filename:<span class="function"><span class="keyword">function</span>(<span class="params">req,file,cb</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> ext = file.originalname.split(<span class="string">'.'</span>)[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">var</span> tmname = (<span class="keyword">new</span> <span class="built_in">Date</span>()).getTime()+<span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">9999</span>)</span><br><span class="line">        cb(<span class="literal">null</span>,<span class="string">''</span>+tmname+<span class="string">'.'</span>+ext+<span class="string">''</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> upload = multer(&#123;</span><br><span class="line">    storage:storage</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/qua-pic'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> size= req.file</span><br><span class="line">    <span class="keyword">if</span>(size&gt;<span class="number">500000</span>)&#123;</span><br><span class="line">        res.status(<span class="number">500</span>).json(&#123;</span><br><span class="line">            err_code:<span class="number">-1</span>,</span><br><span class="line">            messages:<span class="string">"pic too big"</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">     res.status(<span class="number">200</span>).json(&#123;</span><br><span class="line">        err_code:<span class="number">0</span>,</span><br><span class="line">        messages:<span class="string">"okk"</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="四-ajax模板"><a href="#四-ajax模板" class="headerlink" title="四.ajax模板"></a>四.ajax模板</h4><h6 id="xxx-js"><a href="#xxx-js" class="headerlink" title="xxx.js"></a>xxx.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#create-form'</span>).on(<span class="string">'submit'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">var</span> formData = $(<span class="keyword">this</span>).serialize()</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">'post'</span>,</span><br><span class="line">        url:<span class="string">'/create'</span>,</span><br><span class="line">        data:formData,</span><br><span class="line">        dataType:<span class="string">'json'</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> err_code =data.err_code</span><br><span class="line">            <span class="keyword">if</span>(err_code===<span class="number">500</span>)&#123;</span><br><span class="line">                <span class="built_in">window</span>.alert(<span class="string">"服务器出错啦"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err_code===<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">window</span>.alert(<span class="string">"提交成功"</span>)</span><br><span class="line">                <span class="built_in">window</span>.location.href=<span class="string">'/create'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="五-art-template"><a href="#五-art-template" class="headerlink" title="五.art-template"></a>五.art-template</h4><h6 id="app-js-2"><a href="#app-js-2" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.engine(&apos;html&apos;,require(&apos;express-art-template&apos;))</span><br></pre></td></tr></table></figure><h4 id="六-router配置"><a href="#六-router配置" class="headerlink" title="六.router配置"></a>六.router配置</h4><h6 id="app-js-3"><a href="#app-js-3" class="headerlink" title="app.js"></a>app.js</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">'./router'</span>)</span><br><span class="line"></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure><p>​    router.js</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var router =express.Router()</span><br><span class="line"></span><br><span class="line">module.exports = router</span><br></pre></td></tr></table></figure><h4 id="七-获取图片"><a href="#七-获取图片" class="headerlink" title="七.获取图片"></a>七.获取图片</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs =<span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">exports.getAllimgs = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</span><br><span class="line">    fs.readdir(<span class="string">'./uploads/qua-img'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,files</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            callback(err)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> allimgs = [];</span><br><span class="line">        (<span class="function"><span class="keyword">function</span> <span class="title">iterator</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==files.length)&#123;</span><br><span class="line">                callback(allimgs)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            fs.stat(<span class="string">'./uploads/qua-img/'</span>+files[i],<span class="function"><span class="keyword">function</span>(<span class="params">err,stats</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(stats.isFile())&#123;</span><br><span class="line">                    allimgs.push(files[i])</span><br><span class="line">                &#125;</span><br><span class="line">                iterator(i+<span class="number">1</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            &#125;)(<span class="number">0</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="八-kindeditor引入"><a href="#八-kindeditor引入" class="headerlink" title="八.kindeditor引入"></a>八.kindeditor引入</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">KindEditor.ready(<span class="function"><span class="keyword">function</span>(<span class="params">K</span>) </span>&#123;</span><br><span class="line">editor = K.create(<span class="string">'textarea[name="content"]'</span>, &#123;</span><br><span class="line">allowFileManager : <span class="literal">true</span>,</span><br><span class="line">afterBlur: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">this</span>.sync();&#125;,</span><br><span class="line">uploadJson: <span class="string">'/uploadImg'</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/uploadImg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="keyword">new</span> formidable.IncomingForm()</span><br><span class="line">    form.keepExtensions = <span class="literal">true</span></span><br><span class="line">    form.uploadDir =__dirname + <span class="string">'/public/upload'</span></span><br><span class="line">    form.parse(req,<span class="function"><span class="keyword">function</span>(<span class="params">err,fields,files</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            <span class="keyword">throw</span> err</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> image = files.imgFile;</span><br><span class="line">        <span class="keyword">var</span> path = image.path</span><br><span class="line">        path = path.replace(<span class="string">'/\\/g'</span>,<span class="string">'/'</span>)</span><br><span class="line">        <span class="keyword">var</span> url = <span class="string">'/upload'</span> +path.substr(path.lastIndexOf(<span class="string">'/'</span>),path.length)</span><br><span class="line">        <span class="keyword">var</span> info = &#123;</span><br><span class="line">            <span class="string">"error"</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="string">"url"</span>:url</span><br><span class="line">        &#125;;</span><br><span class="line">        res.send(info)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>持续更新..</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;一-引入body-parser&quot;&gt;&lt;a href=&quot;#一-引入body-parser&quot; class=&quot;headerlink&quot; title=&quot;一.引入body-parser&quot;&gt;&lt;/a&gt;一.引入body-parser&lt;/h4&gt;&lt;h6 id=&quot;app-js&quot;&gt;&lt;a href=&quot;#app-js&quot; class=&quot;headerlink&quot; title=&quot;app.js&quot;&gt;&lt;/a&gt;app.js&lt;/h6&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; bodyParser = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;body-parser&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;app.use(bodyParser.urlencoded(&amp;#123;&lt;span class=&quot;attr&quot;&gt;extended&lt;/span&gt;:&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&amp;#125;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;app.use(bodyParser.json())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="便捷" scheme="http://ccblog.club/tags/%E4%BE%BF%E6%8D%B7/"/>
    
  </entry>
  
  <entry>
    <title>node+mongoose增删改查思路</title>
    <link href="http://ccblog.club/2019/09/16/node-mongoose%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%80%9D%E8%B7%AF/"/>
    <id>http://ccblog.club/2019/09/16/node-mongoose增删改查思路/</id>
    <published>2019-09-16T06:57:26.000Z</published>
    <updated>2019-09-16T06:58:51.083Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-建立views视图页面"><a href="#1-建立views视图页面" class="headerlink" title="1.建立views视图页面"></a>1.建立views视图页面</h3><table><thead><tr><th>界面名称</th><th>url地址</th></tr></thead><tbody><tr><td>index.html</td><td>/home</td></tr><tr><td>table.html</td><td>/table</td></tr><tr><td>edit.html</td><td>/table/edit</td></tr></tbody></table><a id="more"></a><h3 id="2-安装相关模块插件"><a href="#2-安装相关模块插件" class="headerlink" title="2.安装相关模块插件"></a>2.安装相关模块插件</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm i -S express//安装组件</span><br><span class="line"></span><br><span class="line">npm i -S art-template</span><br><span class="line">npm i -S express-art-template//安装组件</span><br><span class="line"></span><br><span class="line">npm i -S body-parser//用于post获取数据</span><br><span class="line"></span><br><span class="line">npm i -g nodemon//全局安装，用于实时观察代码改动</span><br></pre></td></tr></table></figure><h3 id="3-建立node服务器"><a href="#3-建立node服务器" class="headerlink" title="3.建立node服务器"></a>3.建立node服务器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"开始监听"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)<span class="comment">//开启端口127.0.0.1:3000的服务</span></span><br></pre></td></tr></table></figure><h3 id="4-node中启用相关插件"><a href="#4-node中启用相关插件" class="headerlink" title="4.node中启用相关插件"></a>4.node中启用相关插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> body = <span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/public'</span>,express.static(<span class="string">'./public/'</span>)) <span class="comment">//用于使用public目录中的js，css等</span></span><br><span class="line"></span><br><span class="line">app.engine(<span class="string">'html'</span>,<span class="built_in">require</span>(<span class="string">'express-art-template'</span>))</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded([extend:<span class="literal">false</span>]))</span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></table></figure><h3 id="5-开启路由"><a href="#5-开启路由" class="headerlink" title="5.开启路由"></a>5.开启路由</h3><p>app.js端</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">'./routers.js'</span>)</span><br><span class="line"></span><br><span class="line">app.use(router) <span class="comment">//导入router模块</span></span><br></pre></td></tr></table></figure><p>router端</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var router = express.Router()</span><br></pre></td></tr></table></figure><h3 id="6-定义传递方式路径"><a href="#6-定义传递方式路径" class="headerlink" title="6.定义传递方式路径"></a>6.定义传递方式路径</h3><table><thead><tr><th>请求方式</th><th>传递路径</th><th>传递参数</th><th>备注</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><h3 id="7-建立mongodb库"><a href="#7-建立mongodb库" class="headerlink" title="7.建立mongodb库"></a>7.建立mongodb库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line"></span><br><span class="line">mongoose.connect(&apos;mongodb:localhost://....&apos;)</span><br><span class="line"></span><br><span class="line">var schema = mongoose.schema()</span><br><span class="line"></span><br><span class="line">var userSchema = new schema(&#123;</span><br><span class="line">data:&#123;&#123;options&#125;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = mongooser.model(&quot;user&quot;,userSchema)</span><br></pre></td></tr></table></figure><h3 id="8-增删改查"><a href="#8-增删改查" class="headerlink" title="8.增删改查"></a>8.增删改查</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//请自行查询mongoose语法，例：</span><br><span class="line">var user = require(&apos;./model/user.js&apos;)</span><br><span class="line"></span><br><span class="line">router.get(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">user.find(function(err)&#123;</span><br><span class="line">if(err)&#123;</span><br><span class="line">consolo.log(err)</span><br><span class="line">&#125;</span><br><span class="line">res.render(&apos;index.html&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-建立views视图页面&quot;&gt;&lt;a href=&quot;#1-建立views视图页面&quot; class=&quot;headerlink&quot; title=&quot;1.建立views视图页面&quot;&gt;&lt;/a&gt;1.建立views视图页面&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;界面名称&lt;/th&gt;
&lt;th&gt;url地址&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;&lt;tr&gt;
&lt;td&gt;index.html&lt;/td&gt;
&lt;td&gt;/home&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;table.html&lt;/td&gt;
&lt;td&gt;/table&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;edit.html&lt;/td&gt;
&lt;td&gt;/table/edit&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="nodejs" scheme="http://ccblog.club/tags/nodejs/"/>
    
      <category term="mongodb" scheme="http://ccblog.club/tags/mongodb/"/>
    
  </entry>
  
  <entry>
    <title>markdown基本语法</title>
    <link href="http://ccblog.club/2019/09/15/markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <id>http://ccblog.club/2019/09/15/markdown基本语法/</id>
    <published>2019-09-15T06:48:47.000Z</published>
    <updated>2019-09-15T06:51:37.293Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/191d1e21f7ed" target="_blank" rel="noopener">链接</a></p><p><del>有链接我为什么要自己写？</del></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/191d1e21f7ed&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;链接&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;del&gt;有链接我为什么要自己写？&lt;/del&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="前端" scheme="http://ccblog.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="html" scheme="http://ccblog.club/tags/html/"/>
    
      <category term="语法基础" scheme="http://ccblog.club/tags/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>突然好想你-五月天</title>
    <link href="http://ccblog.club/2019/09/15/%E7%AA%81%E7%84%B6%E5%A5%BD%E6%83%B3%E4%BD%A0-%E4%BA%94%E6%9C%88%E5%A4%A9/"/>
    <id>http://ccblog.club/2019/09/15/突然好想你-五月天/</id>
    <published>2019-09-15T06:06:44.000Z</published>
    <updated>2019-09-15T06:46:53.937Z</updated>
    
    <content type="html"><![CDATA[<h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><ul><li>原链接</li><li>吉他谱</li><li>弹唱</li><li>总结</li></ul><h5 id="让我们开始吧"><a href="#让我们开始吧" class="headerlink" title="让我们开始吧"></a>让我们开始吧</h5><p>​    <a href="https://yoopu.me/view/g100Ay1J" target="_blank" rel="noopener">原谱链接</a></p><a id="more"></a><p><del>低音唱什么五月天？</del></p><p>​    </p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;目录&quot;&gt;&lt;a href=&quot;#目录&quot; class=&quot;headerlink&quot; title=&quot;目录&quot;&gt;&lt;/a&gt;目录&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;原链接&lt;/li&gt;
&lt;li&gt;吉他谱&lt;/li&gt;
&lt;li&gt;弹唱&lt;/li&gt;
&lt;li&gt;总结&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;让我们开始吧&quot;&gt;&lt;a href=&quot;#让我们开始吧&quot; class=&quot;headerlink&quot; title=&quot;让我们开始吧&quot;&gt;&lt;/a&gt;让我们开始吧&lt;/h5&gt;&lt;p&gt;​    &lt;a href=&quot;https://yoopu.me/view/g100Ay1J&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;原谱链接&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="吉他谱" scheme="http://ccblog.club/categories/%E5%90%89%E4%BB%96%E8%B0%B1/"/>
    
    
      <category term="有谱么" scheme="http://ccblog.club/tags/%E6%9C%89%E8%B0%B1%E4%B9%88/"/>
    
      <category term="弹唱" scheme="http://ccblog.club/tags/%E5%BC%B9%E5%94%B1/"/>
    
  </entry>
  
</feed>
