<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[express配置]]></title>
    <url>%2F2019%2F10%2F19%2Fexpress%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[通过express自带的模板创建带有许多基本上用不到的功能，不如自己配置一个简单易懂的expressapp.js 1234567891011121314151617181920212223242526272829303132333435var express = require(&apos;express&apos;)var app = express()var router = require(&apos;./router&apos;)var bodyParser = require(&apos;body-parser&apos;)var path = require(&apos;path&apos;)var session = require(&apos;express-session&apos;)const MongoStore = require(&apos;connect-mongo&apos;)(session)app.use(&apos;/node_modules/&apos;, express.static(path.join(__dirname, &apos;./node_modules/&apos;)))app.use(session(&#123; secret: &apos;keyboard cat&apos;, resave: false, saveUninitialized: true, rolling: true, cookie: &#123; maxAge: 1000 * 60 * 60 * 24 &#125;, store: new MongoStore(&#123; url: &quot;mongodb://localhost/device&quot;, touchAfter: 24 * 3600 &#125;)&#125;))app.use(&apos;/node_modules/&apos;, express.static(path.join(__dirname, &apos;./node_modules/&apos;)))app.use(&apos;/public/&apos;, express.static(path.join(__dirname, &apos;./public/&apos;)))app.use(bodyParser.urlencoded(&#123; extended: false &#125;))app.use(bodyParser.json())app.use(router)app.use(function (req, res) &#123; res.render(&apos;404.html&apos;)&#125;)app.listen(3000, function () &#123; console.log(&quot;监听成功&quot;)&#125;) router.js 1234var express = require(&quot;express&quot;)var router = express.Router()module.exports = router 后台只要这些配置，至于是做前后端不分离的mvc还是分离的mvvm的配置看需要再加减]]></content>
      <categories>
        <category>-前端</category>
      </categories>
      <tags>
        <tag>express -nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue项目的坑]]></title>
    <url>%2F2019%2F10%2F19%2Fvue%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[####]]></content>
      <categories>
        <category>-前端</category>
      </categories>
      <tags>
        <tag>-vue-cli -vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[session持久化问题]]></title>
    <url>%2F2019%2F10%2F10%2Fsession%E6%8C%81%E4%B9%85%E5%8C%96%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[一 ，问题来源​ 在做web相关的需求时候一旦涉及到登录注册组件那就必然离不开cookie和session这两个东西。session是基于服务器进行存储的，所以当服务器进行重启亦或是掉线时所有的session数据都回摧毁，那么如何才能使session能在一段时间内持续存在呢？ 二 ， 解决办法​ 需要用到express-session以及connect-mongo 12var session = require(&apos;express-session&apos;)const MongoStore = require(&apos;connect-mongo&apos;)(session) ​ 然后再进行相关配置 12345678910111213app.use(session(&#123; secret:&apos;keyboard cat&apos;, resave:false, saveUninitialized:true, rolling:true, cookie:&#123; maxAge:1000*30*60 &#125;, store:new MongoStore(&#123; url:&quot;mongodb://localhost/device&quot;, touchAfter:24 * 3600 &#125;)&#125;)) 之后再到router之中定义session 三 ， 两个端口之间的跨域问题直接上代码，复制粘贴便可 1234567app.all(&apos;*&apos;,(req,res,next)=&gt;&#123; res.header(&quot;Access-Control-Allow-Credentials&quot;,&apos;true&apos;) res.header(&quot;Access-Control-Allow-Origin&quot;,req.headers.origin) res.header(&quot;Access-Control-Allow-Methods&quot;,&quot;PUT,GET,POST,DELETE,OPTIONS&quot;) res.header(&apos;Access-Control-Allow-Headers&apos;,&quot;Content-Type,username&quot;) next()&#125;) 结束！]]></content>
      <categories>
        <category>-前端</category>
      </categories>
      <tags>
        <tag>-express -nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue基础项目留言本]]></title>
    <url>%2F2019%2F10%2F03%2Fvue%E5%9F%BA%E7%A1%80%E9%A1%B9%E7%9B%AE%E7%95%99%E8%A8%80%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[一 。创建项目参考上文，这里不多说二 。 静态页面首先考虑当前界面到底需要几个模板 在这里考虑到了四个组件 APP.vue作为主界面框架 add.vue作为表单的组件 list.vue作为表格组件 ltem.vue作为每行列表的组件 组件传递当父组件向子组件传递内容时 父组件通过 1v-bind:XXX=&apos;XXX&apos; 绑定元素 子组件通过 123prop：&#123; XXX&#125; 获取元素 组件调用当父组件需要调用这个子组件时 父组件通过 1import XXX from &apos;xxx&apos; 获取子组件 然后 123components:&#123; XXX&#125; 调用子组件]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>-vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpack3配置（若前文无法打开请看这篇）]]></title>
    <url>%2F2019%2F10%2F03%2Fwebpack3%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[一，基本配置1.创建src文件夹用于存放主文件​ 2.创建dist文件夹存放webpack转换过的文件3.在根目录下创建webpack.config.js文件用于修改webpack配置4.在src文件夹中创建index.html（随意，建议遵循mvc建立views文件夹），main.js（所有js和css的入口文件）在html不导入任何的js和css包 二，详细配置1.webpack-dev-server该组件用于自动将src的文件打包到dist变成webpack格式输出 123456789101112131415161718192021&lt;!--&gt;终端&lt;--!&gt;npm init -y //初始化项目npm init webpack-dev-server //安装组件&lt;!--&gt;package.json&lt;--!&gt; "scripts": &#123; "test": "echo \"Error: no test specified\" &amp;&amp; exit 1", "dev": "webpack-dev-server --open --port 3000 --contentBase src --hot"&#125;//执行自动打开 绑定3000端口 设src为根目录 启动热更新&lt;!--&gt;配置文件&lt;--!&gt;const path = require('path')module.exports = &#123; entry:path.join(__dirname,'./src/main.js'), //入口文件 output:&#123; path:path.join(__dirname,'./dist'),//出口文件 filename:'bundle.js' &#125;&#125; 2.html-webpack-plugin该组件用于自动生成一个和html相同的界面并且导入bundle.js 123456789101112&lt;!--&gt;终端&lt;--!&gt;npm i html-webpack-plugin&lt;!--&gt;配置文件&lt;--!&gt;plugins:[ new webpack.HotModuleReplacementPlugin(),//new一个热更新的模块对象 new htmlWbppackFlugin(&#123; //创建一个在内存中生成html页面的插件 template:path.join(__dirname,'./src/index.html'),//指定模板页面 filename:'index.html' &#125;) ] 3.导入css/sass/图标/图像url等文件通过各种loader让webpack能够识别这些东西 123456789101112 &lt;!--&gt;终端&lt;--!&gt;npm i css-loader file-loadernpm i url-loader &lt;!--&gt;配置文件&lt;--!&gt; module:&#123;//这个节点用于配置所有的第三方模块加载器 rules:[//所有模块的匹配规则 &#123; test: /\.css$/ ,use:['style-loader','css-loader']&#125;, &#123; test: /\.(jpg|png|gif|jepg)$/,use:'url-loader?limit=7631&amp;name=[hash:8]-[name].[ext]'&#125;,//读取图片 &#123; test: /\.(ttf|eot|svg|woff|woff2)$/,use:"url-loader"&#125;//处理字体文件 ] &#125; 4.通过babel插件来识别es6等高级语言1234567891011&lt;!--&gt;终端&lt;--!&gt;npm i babel-core babel-loader babel-plugin-transform-runtimenpm i babel-preset-env babel-preset-stage-0&lt;!--&gt;配置文件&lt;--!&gt; rules:[//所有模块的匹配规则 &#123; test: /\.css$/ ,use:['style-loader','css-loader']&#125;, &#123; test: /\.(jpg|png|gif|jepg)$/,use:'url-loader?limit=7631&amp;name=[hash:8]-[name].[ext]'&#125;,//读取图片 &#123; test: /\.(ttf|eot|svg|woff|woff2)$/,use:"url-loader"&#125;,//处理字体文件 &#123; &#123;test:/\.js$/,use:"bebel-loader",exclude:/node_modules/&#125;&#125;//在配置时，必须把node_modules排除 ] 然后在根目录新建一个.babelrc的配置文件，为json格式 12"presets":["env","stage-0"],"plugins":["transform-runtime"] 注意 由于本文是基于webpack3.X的配置，目前普遍使用4.X.因此，babel-core的版本必须降为6.X并且babel-loader的版本必须降到7.X，不然你会被报错到怀疑人生。如果你已经将上面的配置操作完毕并且对html，css等操作没有报错的话，拿webpack3.X的配置就基本okk了。]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[通过vue-cli创建vue项目]]></title>
    <url>%2F2019%2F10%2F02%2F%E9%80%9A%E8%BF%87vue-cli%E5%88%9B%E5%BB%BAvue%E9%A1%B9%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[12345npm i -g vue-cli //建议使用全局安装不然的话vue指令无法识别vue init webpack vue_demo //创建名为vue_demo的基于webpack的项目cd vue_demo //进入项目npm i //初始化项目npm run dev //运行项目 完工]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue2.X集合webpack3.X时的各种坑]]></title>
    <url>%2F2019%2F09%2F20%2Fvue2-X%E9%9B%86%E5%90%88webpack3-X%E6%97%B6%E7%9A%84%E5%90%84%E7%A7%8D%E5%9D%91%2F</url>
    <content type="text"><![CDATA[一.vue的引用由于默认的main属性是属于vue.common.js而不是vue.js，因此如果进行普通引入 1import Vue from &apos;vue&apos; 是无法正常运行的。 解决方法：1.直接导入vue路径 1import Vue from &apos;../node_module/vue/dist/vue.js&apos; 2.在webpack配置项中对路径进行改动 12345resolve:&#123; alias:&#123; //修改路径 &quot;vue$&quot;:&quot;vue/dist/vue.js&quot; &#125; &#125; 二.xxx.vue如何让html接受vue文件默认不被webpack识别，因此在进行render等模块操作时候需要导入loader 解决方法123npm i vue-loader vue-template-compiler &#123;test:/\.vue$/,use:&quot;vue-loader&quot;&#125; 正常的话就可以进行vue与webpack的合作了 。。 然而你还是被报错报成猪头的话 123const VueLoaderPlugin = require(&apos;vue-loader/lib/plugin&apos;)new VueLoaderPlugin() 在配置文件的全局和plugins下分别加入这两条代码就可以识别了]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>-vue -webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webpack3.X详细配置指南]]></title>
    <url>%2F2019%2F09%2F20%2Fwebpack3-X%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97%2F</url>
    <content type="text"><![CDATA[一，基本配置1.创建src文件夹用于存放主文件​ 2.创建dist文件夹存放webpack转换过的文件3.在根目录下创建webpack.config.js文件用于修改webpack配置4.在src文件夹中创建index.html（随意，建议遵循mvc建立views文件夹），main.js（所有js和css的入口文件）在html不导入任何的js和css包 二，详细配置1.webpack-dev-server该组件用于自动将src的文件打包到dist变成webpack格式输出 123456789101112131415161718192021&lt;!--&gt;终端&lt;--!&gt;npm init -y //初始化项目npm init webpack-dev-server //安装组件&lt;!--&gt;package.json&lt;--!&gt; "scripts": &#123; "test": "echo \"Error: no test specified\" &amp;&amp; exit 1", "dev": "webpack-dev-server --open --port 3000 --contentBase src --hot"&#125;//执行自动打开 绑定3000端口 设src为根目录 启动热更新&lt;!--&gt;配置文件&lt;--!&gt;const path = require('path')module.exports = &#123; entry:path.join(__dirname,'./src/main.js'), //入口文件 output:&#123; path:path.join(__dirname,'./dist'),//出口文件 filename:'bundle.js' &#125;&#125; 2.html-webpack-plugin该组件用于自动生成一个和html相同的界面并且导入bundle.js 123456789101112&lt;!--&gt;终端&lt;--!&gt;npm i html-webpack-plugin&lt;!--&gt;配置文件&lt;--!&gt;plugins:[ new webpack.HotModuleReplacementPlugin(),//new一个热更新的模块对象 new htmlWbppackFlugin(&#123; //创建一个在内存中生成html页面的插件 template:path.join(__dirname,'./src/index.html'),//指定模板页面 filename:'index.html' &#125;) ] 3.导入css/sass/图标/图像url等文件通过各种loader让webpack能够识别这些东西 123456789101112 &lt;!--&gt;终端&lt;--!&gt;npm i css-loader file-loadernpm i url-loader &lt;!--&gt;配置文件&lt;--!&gt; module:&#123;//这个节点用于配置所有的第三方模块加载器 rules:[//所有模块的匹配规则 &#123; test: /\.css$/ ,use:['style-loader','css-loader']&#125;, &#123; test: /\.(jpg|png|gif|jepg)$/,use:'url-loader?limit=7631&amp;name=[hash:8]-[name].[ext]'&#125;,//读取图片 &#123; test: /\.(ttf|eot|svg|woff|woff2)$/,use:"url-loader"&#125;//处理字体文件 ] &#125; 4.通过babel插件来识别es6等高级语言1234567891011&lt;!--&gt;终端&lt;--!&gt;npm i babel-core babel-loader babel-plugin-transform-runtimenpm i babel-preset-env babel-preset-stage-0&lt;!--&gt;配置文件&lt;--!&gt; rules:[//所有模块的匹配规则 &#123; test: /\.css$/ ,use:['style-loader','css-loader']&#125;, &#123; test: /\.(jpg|png|gif|jepg)$/,use:'url-loader?limit=7631&amp;name=[hash:8]-[name].[ext]'&#125;,//读取图片 &#123; test: /\.(ttf|eot|svg|woff|woff2)$/,use:"url-loader"&#125;,//处理字体文件 &#123; &#123;test:/\.js$/,use:"bebel-loader",exclude:/node_modules/&#125;&#125;//在配置时，必须把node_modules排除 ] 然后在根目录新建一个.babelrc的配置文件，为json格式 12"presets":["env","stage-0"],"plugins":["transform-runtime"] 注意 由于本文是基于webpack3.X的配置，目前普遍使用4.X.因此，babel-core的版本必须降为6.X并且babel-loader的版本必须降到7.X，不然你会被报错到怀疑人生。如果你已经将上面的配置操作完毕并且对html，css等操作没有报错的话，拿webpack3.X的配置就基本okk了。]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nodejs最实用分页攻略]]></title>
    <url>%2F2019%2F09%2F20%2Fnodejs%E6%9C%80%E5%AE%9E%E7%94%A8%E5%88%86%E9%A1%B5%E6%94%BB%E7%95%A5%2F</url>
    <content type="text"><![CDATA[话不多说直接开始1.准备工作​ 在你看这篇文章想要进行分页时，请确保已经做好以下准备工作 ​ ——你的html页面已经搭建完成（表格，上一页/下一页，页面跳转） ​ ——你的后台数据已经通过模板或者循环成功的渲染到你的前台表格 2.给他们做一个点击事件，通过switch（if）操作1234567891011121314151617181920212223242526272829303132function jump(type) &#123; var nowpage = $('#nowpage').text() var allpage = $('#allpage').text() switch (type) &#123; case 'prev': if (nowpage &gt; 1) &#123; nowpage-- &#125; else &#123; alert('已经是第一页了') &#125; ; break; case 'next': if (nowpage &lt; allpage) &#123; nowpage++ &#125; else &#123; alert('已经是最后一页了') &#125; ; break; case 'go': if ($('#gopage').val() &gt; allpage) &#123; alert('输入页数错误了') &#125; else if ($('#gopage').val() &lt; 1) &#123; alert('输入页数错误了') &#125; else &#123; nowpage = $('#gopage').val() &#125;; break; &#125; window.location.href = '/create?page='+nowpage+''&#125; 3.后台操作1234567891011121314151617181920212223router.get('/create',function(req,res)&#123; var pagesize = req.query.pagesize || 10 var page = req.query.page || 1 var allcount1 = null Journalism.count(&#123;&#125;,function(err,allcount)&#123; if(err)&#123; res.status(500).send("Server Not Found") &#125; allcount1 = allcount &#125;) Journalism.find(function(err,journalisms)&#123; if(err)&#123; return res.status(500).send("Server Not Found") &#125; res.render('create.html',&#123; journalisms:journalisms, user:req.session.user, nowpage:page, allpage:Math.ceil(allcount1/pagesize) &#125;) &#125;).sort(&#123;'datatime':-1&#125;).limit(pagesize).skip((page-1)*pagesize) &#125;) 基本分页就此完成]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nodejs在表单中添加验证码验证]]></title>
    <url>%2F2019%2F09%2F20%2Fnodejs%E5%9C%A8%E8%A1%A8%E5%8D%95%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%AA%8C%E8%AF%81%E7%A0%81%E9%AA%8C%E8%AF%81%2F</url>
    <content type="text"><![CDATA[废话不多说了直接开始吧1，好一个简单的表单页面，just like，懒得改格式了你们将就哈12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&lt;form id="formlist"&gt; &lt;div class="form-group"&gt; &lt;label for="exampleFormControlInput1"&gt;您的姓名&lt;/label&gt; &lt;input type="text" class="form-control" id="exampleFormControlInput1" placeholder="请输入正确的姓名方便我们的联系" name="username"&gt; &lt;/div&gt; &lt;div class="form-group"&gt; &lt;label for="exampleFormControlInput1"&gt;您的邮箱&lt;/label&gt; &lt;input type="email" class="form-control" id="exampleFormControlInput1" placeholder="请输入正确的邮箱方便我们的联系" name="emial"&gt; &lt;/div&gt; &lt;div class="form-group"&gt; &lt;label for="exampleFormControlInput1"&gt;您的手机号码&lt;/label&gt; &lt;input type="text" class="form-control" id="exampleFormControlInput1" placeholder="请输入正确的手机号方便我们的联系" name="phone"&gt; &lt;/div&gt; &lt;div class="form-group"&gt; &lt;label for="exampleFormControlSelect1"&gt;应聘合作相关&lt;/label&gt; &lt;select class="form-control" id="exampleFormControlSelect1" name="class"&gt; &lt;option&gt;应聘&lt;/option&gt; &lt;option&gt;合作&lt;/option&gt; &lt;option&gt;投诉&lt;/option&gt; &lt;option&gt;建议&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div class="form-group"&gt; &lt;label for="exampleFormControlTextarea1"&gt;具体内容&lt;/label&gt; &lt;textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="note"&gt;&lt;/textarea&gt; &lt;/div&gt; &lt;input type="text" placeholder="验证码" id="svgtext" name="svg"&gt; &lt;img src='/ver' onclick='changeSvg()' id="svgimg"&gt; &lt;br&gt; &lt;br&gt; &lt;div class="alert alert-warning" role="alert" id="control"&gt; 请输入验证码 &lt;/div&gt; &lt;br&gt; &lt;button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"&gt; 确认提交信息 &lt;/button&gt; &lt;!-- Modal --&gt; &lt;div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"&gt; &lt;div class="modal-dialog" role="document"&gt; &lt;div class="modal-content"&gt; &lt;div class="modal-header"&gt; &lt;h5 class="modal-title" id="exampleModalLabel"&gt;提交您的信息&lt;/h5&gt; &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close"&gt; &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt; &lt;/button&gt; &lt;/div&gt; &lt;div class="modal-body"&gt; 请确认您填写的信息准确从而方便我们之间的联系 &lt;/div&gt; &lt;div class="modal-footer"&gt; &lt;button type="button" class="btn btn-secondary" data-dismiss="modal"&gt;再想想&lt;/button&gt; &lt;button type="submit" class="btn btn-primary"&gt;确定了&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/form&gt; 2.然后我们在router.js端做个验证码12345678var captcha = require('svg-captcha')router.get('/ver',function(req,res)&#123; var cap = captcha.create(); req.session.captcha = cap.text res.type('svg') res.send(cap.data);&#125;) 这样一来图片img的src路径指向该理由，从而显示验证码图片 3.做一个点击事件12345&lt;script&gt; function changeSvg()&#123; $(event.target).attr('src','/ver?'+Math.random()) &#125; &lt;/script&gt; 4.最后便是提交表单的ajax了12345678910111213141516171819202122232425262728$('#formlist').on('submit',function(e)&#123; e.preventDefault() var formData = $(this).serialize() $.ajax(&#123; type:'post', url:'/person', data:formData, dataType:'json', success:function(data)&#123; var err_code =data.err_code if(err_code===500)&#123; window.alert("服务器出错啦") &#125; else if(err_code===1)&#123; window.alert("验证码错误请重试") $('#control').attr("class","alert alert-danger") $('#control').text('请输入正确的验证码,注意大小写的区分哦') $('#svgimg').attr('src','/ver?'+Math.random()) &#125; else if(err_code===0)&#123; window.alert("您的信息已经提交成功") $('#control').attr("class","alert alert-success") $('#control').text('验证码输入正确') window.location.href = '/person' &#125; &#125; &#125;)&#125;) 关于表单提交的post路由就不贴了，这样一个验证系统就差不多多好了( ´Д`)y━・ 如有问题可以提问]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[在node项目中经常用到的一些东西]]></title>
    <url>%2F2019%2F09%2F18%2F%E5%9C%A8node%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%BB%8F%E5%B8%B8%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF%2F</url>
    <content type="text"><![CDATA[一.引入body-parserapp.js1234var bodyParser = require('body-parser')app.use(bodyParser.urlencoded(&#123;extended:false&#125;))app.use(bodyParser.json()) #### 二.引入sessionapp.js1234567var session = require('express-session')app.use(session(&#123; secret:'keyboard cat', resave:false, saveUninitialized:true&#125;)) router.js12345678910111213141516171819202122232425router.post('/login',function(req,res)&#123; var body = req.body User.findOne(&#123; emial:body.emial, password:body.password &#125;,function(err,user)&#123; if(err)&#123; return res.status(500).json(&#123; err_code:500, messages:"err" &#125;) &#125; if(!user)&#123; return res.status(200).json(&#123; err_code:0, messages:"emial has benn invilied" &#125;) &#125; req.session.user = user return res.status(200).json(&#123; err_code:1, messages:"ok" &#125;) &#125;)&#125;) 三.引入multerrouter.js1234567891011121314151617181920212223242526272829var multer =require('multer')var storage = multer.diskStorage(&#123; destination:function(req,file,cb)&#123; cb(null,'./uploads/qua-img') &#125;, filename:function(req,file,cb)&#123; var ext = file.originalname.split('.')[1] var tmname = (new Date()).getTime()+parseInt(Math.random()*9999) cb(null,''+tmname+'.'+ext+'') &#125;&#125;)var upload = multer(&#123; storage:storage&#125;);router.post('/qua-pic',function(req,res)&#123; var size= req.file if(size&gt;500000)&#123; res.status(500).json(&#123; err_code:-1, messages:"pic too big" &#125;) &#125; res.status(200).json(&#123; err_code:0, messages:"okk" &#125;)&#125;) 四.ajax模板xxx.js1234567891011121314151617181920$('#create-form').on('submit',function(e)&#123; e.preventDefault() var formData = $(this).serialize() $.ajax(&#123; type:'post', url:'/create', data:formData, dataType:'json', success:function(data)&#123; var err_code =data.err_code if(err_code===500)&#123; window.alert("服务器出错啦") &#125; else if(err_code===0)&#123; window.alert("提交成功") window.location.href='/create' &#125; &#125; &#125;)&#125;) 五.art-templateapp.js1app.engine(&apos;html&apos;,require(&apos;express-art-template&apos;)) 六.router配置app.js123var router = require('./router')app.use(router) ​ router.js 123var router =express.Router()module.exports = router 七.获取图片1234567891011121314151617181920212223var fs =require('fs')exports.getAllimgs = function(callback)&#123; fs.readdir('./uploads/qua-img',function(err,files)&#123; if(err)&#123; callback(err) return &#125; var allimgs = []; (function iterator(i)&#123; if(i==files.length)&#123; callback(allimgs) return &#125; fs.stat('./uploads/qua-img/'+files[i],function(err,stats)&#123; if(stats.isFile())&#123; allimgs.push(files[i]) &#125; iterator(i+1) &#125;) &#125;)(0) &#125;)&#125; 八.kindeditor引入123456789101112131415161718192021222324252627KindEditor.ready(function(K) &#123; editor = K.create('textarea[name="content"]', &#123; allowFileManager : true, afterBlur: function()&#123;this.sync();&#125;, uploadJson: '/uploadImg' &#125;);&#125;);router.post('/uploadImg',function(req,res,next)&#123; var form = new formidable.IncomingForm() form.keepExtensions = true form.uploadDir =__dirname + '/public/upload' form.parse(req,function(err,fields,files)&#123; if(err)&#123; throw err &#125; var image = files.imgFile; var path = image.path path = path.replace('/\\/g','/') var url = '/upload' +path.substr(path.lastIndexOf('/'),path.length) var info = &#123; "error":0, "url":url &#125;; res.send(info) &#125;)&#125;) 持续更新..]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>便捷</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[node+mongoose增删改查思路]]></title>
    <url>%2F2019%2F09%2F16%2Fnode-mongoose%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%80%9D%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[1.建立views视图页面 界面名称 url地址 index.html /home table.html /table edit.html /table/edit 2.安装相关模块插件12345678npm i -S express //安装组件npm i -S art-template npm i -S express-art-template //安装组件npm i -S body-parser //用于post获取数据npm i -g nodemon //全局安装，用于实时观察代码改动 3.建立node服务器12345678var express = require('express')var app = express() app.listen(3000,function()&#123; console.log("开始监听") &#125; &#125;) //开启端口127.0.0.1:3000的服务 4.node中启用相关插件12345678var body = require('body-parser')app.use('/public',express.static('./public/')) //用于使用public目录中的js，css等app.engine('html',require('express-art-template'))app.use(bodyParser.urlencoded([extend:false]))app.use(bodyParser.json()) 5.开启路由app.js端 123var router = require('./routers.js')app.use(router) //导入router模块 router端 1var router = express.Router() 6.定义传递方式路径 请求方式 传递路径 传递参数 备注 7.建立mongodb库1234567891011var mongoose = require(&apos;mongoose&apos;)mongoose.connect(&apos;mongodb:localhost://....&apos;)var schema = mongoose.schema()var userSchema = new schema(&#123; data:&#123;&#123;options&#125;&#125;&#125;)module.exports = mongooser.model(&quot;user&quot;,userSchema) 8.增删改查1234567891011//请自行查询mongoose语法，例：var user = require(&apos;./model/user.js&apos;)router.get(&apos;/&apos;,function(req,res)&#123; user.find(function(err)&#123; if(err)&#123; consolo.log(err) &#125; res.render(&apos;index.html&apos;) &#125;)&#125;)]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[markdown基本语法]]></title>
    <url>%2F2019%2F09%2F15%2Fmarkdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%2F</url>
    <content type="text"><![CDATA[链接 有链接我为什么要自己写？]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>语法基础</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[突然好想你-五月天]]></title>
    <url>%2F2019%2F09%2F15%2F%E7%AA%81%E7%84%B6%E5%A5%BD%E6%83%B3%E4%BD%A0-%E4%BA%94%E6%9C%88%E5%A4%A9%2F</url>
    <content type="text"><![CDATA[目录 原链接 吉他谱 弹唱 总结 让我们开始吧​ 原谱链接 低音唱什么五月天？ ​]]></content>
      <categories>
        <category>吉他谱</category>
      </categories>
      <tags>
        <tag>有谱么</tag>
        <tag>弹唱</tag>
      </tags>
  </entry>
</search>
